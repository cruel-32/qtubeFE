# Claude 지침

## 언어 설정
- 사용자에게 질문할 때는 한글로 질문해주세요.

## 프로젝트 정보
이 프로젝트는 React Native를 사용한 퀴즈 앱 "qtube"입니다.

- 메인 프로젝트: `/qtube/FE/` (React Native/Expo/TypeScript)
- api 서버 : `/qtube/BE/` (nodejs/fastify/postgres/redis)

## 기술 스택

### Frontend (React Native)
- **Framework**: React Native + Expo
- **Language**: TypeScript
- **State Management**: Zustand, react-query
- **Validation**: Zod
- **Directory Structure**:
  - `src/components/`: 재사용 가능한 컴포넌트
  - `src/types/`: TypeScript 타입 정의
  - `src/utils/`: 유티리티 함수

### Backend 주요 기술 스택:

1. **핵심 프레임워크/언어**
- TypeScript
- Fastify (Node.js 웹 프레임워크)

2. **데이터베이스 & 캐싱**
- PostgreSQL (`pg`, `@fastify/postgres`)
- Redis (`@fastify/redis`, `ioredis`)
- TypeORM (ORM)

3. **API 문서화**
- Swagger (`@fastify/swagger`, `@fastify/swagger-ui`)

4. **인증/보안**
- JWT (`@fastify/jwt`)
- Firebase Admin SDK (`firebase-admin`)

5. **유틸리티**
- Zod (스키마 검증)
- node-cron (스케줄링)
- date-fns (날짜 처리)

### BE 프로젝트 구조:
```
BE/
├── src/
│   ├── config/         # 데이터베이스, 환경변수 등 설정
│   ├── entities/       # TypeORM 엔티티 정의
│   ├── migrations/     # 데이터베이스 마이그레이션
│   ├── modules/        # 기능별 모듈 (MVC 패턴)
│   │   ├── Answer/
│   │   ├── Auth/
│   │   ├── Badge/
│   │   ├── Category/
│   │   ├── Quiz/
│   │   ├── Ranking/
│   │   ├── Report/
│   │   └── User/
│   ├── plugins/        # Fastify 플러그인
│   ├── types/         # TypeScript 타입 정의
│   └── utils/         # 유틸리티 함수
```

### 아키텍처 특징:
1. **모듈식 구조**: 각 기능이 독립적인 모듈로 분리되어 있으며, 각 모듈은 controllers, interfaces, routes 등을 포함
2. **마이그레이션 지원**: TypeORM을 사용한 데이터베이스 마이그레이션 관리
3. **API 문서화**: Swagger를 통한 자동 API 문서화
4. **타입 안정성**: TypeScript와 Zod를 통한 강력한 타입 체크와 검증
5. **캐싱 전략**: Redis를 활용한 캐싱 구현

이 프로젝트는 퀴즈 애플리케이션의 백엔드로, 사용자 관리, 퀴즈 관리, 랭킹 시스템, 뱃지 시스템 등 다양한 기능을 제공하는 것으로 보입니다.

### 개발 가이드라인
- TypeScript를 사용하여 모든 파일을 작성
- Zod를 사용하여 폼 validation 및 데이터 스키마 정의
- Zustand를 사용하여 전역 상태 관리
- 컴포넌트는 함수형 컴포넌트로 작성
- 파일명은 PascalCase 사용 (예: LoginScreen.tsx)
- 스타일은 StyleSheet.create() 사용
- 웹버전은 만들지 않고 ios와 android 버전만 만듭니다.
- context7 mcp를 이용해 항상 최신 문서를 확인하고 작업합니다.
- 파일에 대한 경로를 알려주면 직접 접근이 힘들 때는 @wonderwhy-er/desktop-commander 를 사용하여 접근한다.
- 로컬 postgre에 접속할 땐 postgre-sql-mcp-server 를 사용하여 접근한다.

### 퀴즈를 만들때 가이드라인 
- 본 앱은 매일 카테고리 별 새로운 퀴즈를 제공하는 게임 앱이다.
- 퀴즈를 생성할때는 /Users/seungheechoi/develop/qtube/BE/src/entities/Quiz.ts 엔티티에 맞춰 생성한다. 
- 퀴즈는 갯수를 지정하지 않으면 카테고리별로 각 기본 20개씩 만든다.
- insert할 테이블은 qtube의 quiz테이블이다.
- 퀴즈의 갯수는 객관식과 주관식 비율이 9:1이 되도록 제작한다.
- 객관식은 type이 0, 주관식은 type이 1이다.
- 주관식은 정답이 단답형에 10자 이하, 그리고 특수문자가 포함 되지 않아야 한다.
- 객관식은 4개의 문항이 존재해야 한다.
- 객관식의 자세한 지침은 아래 '범용 퀴즈 유형 분류 및 정의' 를 따른다.
- 만약 주제가 고유명사라면 지문에서 고유명사에 대한 언급이 있어야 한다. 
- 퀴즈를 생성하여 DB에 바로 insert할 수 있게끔 sql파일로 만든다.
- 파일명은 [categoryId].sql 이런식으로 해줘.

# 범용 퀴즈 유형 분류 및 정의

## 1. 기본형 객관식 유형

### 1-1. 단일 정답형 (Single Choice)
**정의**: 여러 선택지 중 하나의 정답만을 선택하는 가장 기본적인 형태
**구조**: 문제 + 4-5개 선택지 중 1개 정답
**예시**: "한국의 수도는? ①서울 ②부산 ③대구 ④인천"

### 1-2. 복수 정답형 (Multiple Choice)
**정의**: 여러 선택지 중 정답이 되는 모든 것을 선택하는 형태
**구조**: 문제 + 선택지 중 2개 이상이 정답
**예시**: "다음 중 소수인 것을 모두 고르시오. ①2 ②3 ③4 ④5"

### 1-3. 합답형 (Combination Type)
**정의**: 미리 제시된 보기들을 조합하여 정답을 고르는 형태
**구조**: 보기 제시 + 보기 조합 선택지
**예시**: "㉠사과 ㉡바나나 ㉢당근 중 과일은? ①㉠㉡ ②㉠㉢ ③㉡㉢"

## 2. 지문 기반 유형

### 2-1. 지문 분석형 (Passage Analysis)
**정의**: 긴 지문을 읽고 내용을 분석하여 답하는 형태
**구조**: 긴 설명 지문 + 지문 내용 관련 질문
**특징**: 독해력과 분석력을 종합적으로 평가

### 2-2. 함의 추론형 (Inference Type)
**정의**: 주어진 정보로부터 암시되거나 유추할 수 있는 내용을 묻는 형태
**구조**: 상황 설명 + "다음 중 추론할 수 있는 것은?"
**특징**: 논리적 사고력 평가에 적합

### 2-3. 예외 찾기형 (Exception Finding)
**정의**: 주어진 조건이나 범주에 해당하지 않는 것을 찾는 형태
**구조**: "다음 중 ~가 아닌 것은?" 또는 "~와 관련 없는 것은?"
**특징**: 분류 능력과 세밀한 지식 확인

## 3. 완성형 유형

### 3-1. 빈칸 추론형 (Fill in the Blank)
**정의**: 문장이나 공식에서 빈칸에 들어갈 적절한 내용을 선택하는 형태
**구조**: 빈칸이 포함된 문장 + 빈칸에 들어갈 선택지
**특징**: 문맥 이해력과 지식 활용 능력 평가

### 3-2. 연결 완성형 (Connection Completion)
**정의**: 앞뒤 내용의 논리적 연결을 완성하는 형태
**구조**: "A이므로 ___이다" 형태의 논리 구조 완성
**특징**: 인과관계 이해력 평가

## 4. 순서/배열 유형

### 4-1. 시간순 배열형 (Chronological Order)
**정의**: 여러 사건이나 과정을 시간 순서대로 나열하는 형태
**구조**: 무작위로 나열된 항목들을 올바른 시간 순서로 배열
**활용**: 역사, 과학 실험 과정, 발달 단계 등

### 4-2. 절차순 배열형 (Process Order)
**정의**: 특정 과정이나 절차를 논리적 순서대로 나열하는 형태
**구조**: 단계별 과정을 올바른 순서로 배열
**활용**: 수학 문제 해결 과정, 과학 실험, 요리법 등

### 4-3. 크기순 배열형 (Size/Magnitude Order)
**정의**: 크기, 중요도, 빈도 등에 따라 순서대로 나열하는 형태
**구조**: 수치나 등급에 따른 정렬
**활용**: 수학, 지리, 경제 데이터 등

## 5. 비교/대조 유형

### 5-1. 공통점 찾기형 (Common Feature)
**정의**: 주어진 항목들의 공통점이나 공통 특징을 찾는 형태
**구조**: 여러 항목 제시 + "공통점은?"
**특징**: 분류 및 추상화 능력 평가

### 5-2. 차이점 분석형 (Difference Analysis)
**정의**: 유사한 개념들 간의 차이점을 구별하는 형태
**구조**: 비슷한 개념 2개 이상 + 차이점 질문
**특징**: 세밀한 구분 능력 평가

### 5-3. 대응 관계형 (Correspondence Type)
**정의**: A:B = C:? 형태의 유추 관계를 찾는 형태
**구조**: 관계성 제시 + 동일한 관계성 적용
**특징**: 유추적 사고력 평가

## 6. 계산/추론 유형

### 6-1. 단순 계산형 (Simple Calculation)
**정의**: 기본적인 수치 계산을 통해 답을 구하는 형태
**구조**: 수치 정보 + 계산 과정 + 결과 선택
**활용**: 수학, 물리, 화학, 경제 등

### 6-2. 논리 추론형 (Logical Reasoning)
**정의**: 주어진 조건들로부터 논리적으로 결론을 도출하는 형태
**구조**: 전제 조건들 + 논리적 결론
**특징**: 연역적/귀납적 사고력 평가

### 6-3. 패턴 인식형 (Pattern Recognition)
**정의**: 숫자, 도형, 문자 등의 패턴을 파악하여 다음을 예측하는 형태
**구조**: 일련의 패턴 + 다음에 올 항목
**활용**: 수학, 논리, IQ 테스트 등

## 7. 참/거짓 유형

### 7-1. 단순 참/거짓형 (True/False)
**정의**: 주어진 명제가 참인지 거짓인지 판단하는 형태
**구조**: 명제 1개 + 참/거짓 선택
**특징**: 명확한 지식 확인에 적합

### 7-2. 복합 참/거짓형 (Multiple True/False)
**정의**: 여러 명제 중 참인 것들을 모두 선택하는 형태
**구조**: 여러 명제 + 각각의 참/거짓 판별
**특징**: 종합적 지식 평가

## 8. 상황 기반 유형

### 8-1. 사례 적용형 (Case Application)
**정의**: 주어진 원리나 법칙을 구체적 상황에 적용하는 형태
**구조**: 원리/법칙 + 구체적 상황 + 적용 결과
**특징**: 지식의 실제 활용 능력 평가

### 8-2. 문제 해결형 (Problem Solving)
**정의**: 복합적인 상황에서 최적의 해결책을 찾는 형태
**구조**: 복잡한 상황 제시 + 해결 방안 선택
**특징**: 종합적 사고력과 응용력 평가

### 8-3. 의사결정형 (Decision Making)
**정의**: 주어진 조건 하에서 최선의 선택을 하는 형태
**구조**: 조건과 제약사항 + 선택지별 장단점 고려
**특징**: 판단력과 분석력 평가

## 9. 창의적 유형

### 9-1. 발상 전환형 (Lateral Thinking)
**정의**: 고정관념을 벗어난 창의적 사고를 요구하는 형태
**구조**: 일반적 접근으로는 풀기 어려운 문제
**특징**: 창의성과 유연한 사고 평가

### 9-2. 다각도 분석형 (Multi-perspective Analysis)
**정의**: 하나의 현상을 여러 관점에서 분석하는 형태
**구조**: 복합적 현상 + 다양한 해석 관점
**특징**: 통합적 사고력 평가

## 활용 지침

### 난이도 조절 방법
- **쉬움**: 직접적 지식, 단순 계산, 명확한 정답 D등급
- **보통**: 간단한 추론, 기본 응용, 2단계 사고 C등급
- **어려움**: 복합 추론, 다단계 사고, 함정 요소 포함 B등급
- **매우 어려움**: 창의적 사고, 통합적 분석, 다중 해석 가능 A등급

### 카테고리별 적합성
- **암기 중심 과목**: 단일 정답형, 참/거짓형, 순서 배열형
- **이해 중심 과목**: 지문 분석형, 빈칸 추론형, 사례 적용형
- **사고력 중심**: 논리 추론형, 패턴 인식형, 문제 해결형
- **응용 중심**: 상황 기반형, 의사결정형, 다각도 분석형

